# Пакетный менеджер poetry

[link на сайт с документацией](https://python-poetry.org/docs/)

Poetry — это мощный инструмент для управления зависимостями и пакетами в Python. Он предлагает удобный способ установки, обновления и публикации библиотек, а также автоматическое создание виртуального окружения для проектов.

Основные возможности Poetry:

1) Управление зависимостями через файл pyproject.toml, заменяя requirements.txt.
2) Автоматическое создание виртуального окружения, избавляя от необходимости вручную запускать virtualenv.

3) Удобное создание пакетов, упрощая процесс подготовки setup.py.

4) Файл poetry.lock, фиксирующий версии зависимостей для воспроизводимости сборки.

## 1. Установка Poetry

`python3 -m pip install --user poetry` - установить Poetry с помощью pip

`pip install poetry`

Или использовать curl для загрузки установочного скрипта:

`curl -sSL https://install.python-poetry.org | python3 -` - Для Windows можно воспользоваться PowerShell

`(Invoke-WebRequest -Uri https://install.python-poetry.org -UseBasicParsing).Content | python3 -`

## 2. Использование Poetry

`poetry new my_project` - Создание нового проекта. После чего создастся папка с названием вашего проекта, в этой папке будет лежать файл pyproject.toml.

`poetry new <project_name>` — создаёт новый проект с базовой структурой.

`poetry init` - Инициализация Poetry в существующем проекте, создавая pyproject.toml.

`poetry add requests` - Добавление зависимости например библиотеку requests

`poetry add <package>` — добавляет новый пакет в проект и обновляет pyproject.toml.
Можно передать параметры:
`--dev` (-D): установит пакет в качестве dev зависимости
`--path`: путь к пакету (если пакет лежит локально)
`--lock`: не устанавливает зависимости, а только обновляет файл poetry.lock

`poetry install` - Установка зависимостей указанных в файле pyproject.toml именно после этой команды создается виртуальное окружение для проекта если его еще нет для этого проекта.
Метод может принимать параметры:
--remove-untracked: удалит старые пакеты, которые больше не используются в проекте
--no-dev: dev пакеты не будут устанавливаться

`poetry update` — обновляет зависимости до последних совместимых версий.

`poetry run python script.py` - Запуск скрипта внутри виртуального окружения:

Poetry делает управление зависимостями более предсказуемым и удобным, особенно если ты работаешь с несколькими проектами.

`poetry remove <package>` — удаляет пакет из проекта.

Работа с виртуальным окружением

`poetry env list` — показывает список виртуальных окружений.

`poetry env use <python_version>` — выбирает конкретную версию Python для проекта.

`poetry env use python3.10` - установка python 3.10 в проект

`poetry env info` - команда покажет какие виртуальные окружения установлены в poetry.

`poetry env use "C:\Users\ТВОЙ_ПОЛЬЗОВАТЕЛЬ\AppData\Local\Programs\Python\Python312\python.exe"` - указывает какое именно виртуальное окружение использовать в проекте.

`env activate` - команда активирует созданное в проекте виртуальное окружение.

`poetry shell` — активирует виртуальное окружение проекта (windows).

`poetry run <command>` — запускает команду внутри виртуального окружения.

Просмотр информации

`poetry show` — показывает список установленных зависимостей.

`poetry show --tree` — выводит зависимости в виде дерева.

`poetry show <package>` — показывает информацию о конкретном пакете.

`poetry show --latest` - команда покажет есть ли более свежие пакеты чем у нас уже установлены.

Работа с пакетами

`poetry build` — собирает пакет для публикации.

`poetry publish` — публикует пакет в PyPI.

`poetry export -f requirements.txt > requirements.txt` — экспортирует зависимости в requirements.txt.

Дополнительные команды

`poetry check` — проверяет корректность pyproject.toml.

`poetry cache clear` — очищает кэш Poetry.

`poetry config --list` — показывает текущие настройки Poetry.
